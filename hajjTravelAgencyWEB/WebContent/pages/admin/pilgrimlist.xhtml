<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui">
	
	
		<h:form id="mmaster">
	<p:dataTable rendered="#{not empty pilgrimBean.pilgrims}"
		value="#{pilgrimBean.pilgrims}" 
		var="pil"
		rowKey="#{pil.pilgrimCin}"
		border="1" 
		paginator="true"
		paginatorPosition="bottom"
		rows="10"
		selectionMode="single"
		selection="#{pilgrimBean.pilgrim}"
		
		>

			<f:facet name="header">  
				  My Pilgrims
        </f:facet>
        <p:ajax event="rowSelect" listener="#{pilgrimBean.onRowSelect}" update=":mdetails"/>


			<p:column headerText="First" sortBy="#{pil.pilgrimFirstName}" filterBy="#{pil.pilgrimFirstName}">

				<h:outputText value="#{pil.pilgrimFirstName}" />
			</p:column>
			<p:column headerText="Last" sortBy="#{pil.pilgrimLastName}" filterBy="#{pil.pilgrimLastName}">
				<h:outputText value="#{pil.pilgrimLastName}" />
			</p:column>
			<p:column headerText="Gender" sortBy="#{pil.pilgrimGender}" filterBy="#{pil.pilgrimGender}">

				<h:outputText value="#{pil.pilgrimGender}"/>
			</p:column>
			<p:column headerText="CIN" sortBy="#{pil.pilgrimCin}">

				<h:outputText value="#{pil.pilgrimCin}" />
			</p:column>

			<p:column headerText="Passport" sortBy="#{pil.pilgrimPassport}">
				<h:outputText value="#{pil.pilgrimPassport}" />
			</p:column>

			<p:column headerText="Address" sortBy="#{pil.pilgrimAddress}">
				<h:outputText value="#{pil.pilgrimAddress}" />
			</p:column>
			<p:column headerText="Email" sortBy="#{pil.pilgrimEmail}">
				<h:outputText value="#{pil.pilgrimEmail}" />
			</p:column>
			<p:column headerText="Phone" sortBy="#{pil.pilgrimPhone}">
				<h:outputText value="#{pil.pilgrimPhone}" />
			</p:column>
	</p:dataTable>
    <p:commandButton  actionListener="#{pilgrimBean.doNew}" value="New" icon="ui-icon-circle-plus" update=":mdetails"/>
	

	</h:form>


</ui:composition>